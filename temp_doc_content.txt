ğŸ“¦
Inventory Management Optimization
Mathematical Formulation & Approach Comparison
HealthForecast AI Platform
Industrial Engineering Approach
December 2024
Table of Contents
1. Healthcare Inventory Management Context
1.1 Why Inventory Optimization Matters in Healthcare
Healthcare inventory management is critical because:
Stockouts can be life-threatening (medications, PPE during pandemics)
Overstocking ties up capital and leads to expiration waste
Demand is uncertain and driven by patient arrivals (your ML forecast target)
Many items have shelf life constraints (medications, blood products)
1.2 Inventory Categories in HealthForecast AI
1.3 The ML-Inventory Connection
Your patient arrival forecasts directly drive inventory demand:
d_{i,t} = Î±_i Ã— DÌ‚_t    (where Î±_i = usage rate per patient for item i)    (1)
Example: If DÌ‚_t = 100 patients and glove usage is 5 per patient:
d_{gloves,t} = 5 Ã— 100 = 500 pairs needed    (2)
2. From Patient Forecasts to Inventory Demand Intervals
2.1 Propagating Uncertainty from ML Forecasts
Your ML model provides patient arrival intervals [L_t, U_t]. Convert to inventory demand:
dÌ‚_{i,t} = Î±_i Ã— DÌ‚_t    (point forecast)    (3)
[d_{i,t}^L, d_{i,t}^U] = [Î±_i Ã— L_t, Î±_i Ã— U_t]    (prediction interval)    (4)
2.2 Lead Time Demand
For inventory decisions, we need demand during lead time (time to receive order):
D_{i,L} = Î£_{Ï„=t}^{t+L} d_{i,Ï„}    (demand during lead time L)    (5)
If demand is approximately stationary with mean Î¼_i and std Ïƒ_i:
E[D_{i,L}] = L Ã— Î¼_i    (6)
Std[D_{i,L}] = âˆšL Ã— Ïƒ_i    (7)
2.3 Inventory Demand RPIW
Compute the Relative Prediction Interval Width for inventory demand:
RPIW_i = (d_{i,t}^U - d_{i,t}^L) / dÌ‚_{i,t} Ã— 100%    (8)
This is the SAME as patient RPIW since the scaling factor Î±_i cancels:
RPIW_i = (Î±_i Ã— U_t - Î±_i Ã— L_t) / (Î±_i Ã— DÌ‚_t) = (U_t - L_t) / DÌ‚_t = RPIW_{patients}    (9)
3. Problem Definition
3.1 Decision Variables
3.2 Parameters
3.3 Inventory Balance Equation
Fundamental inventory dynamics:
I_{i,t} = I_{i,t-1} + Q_{i,t-L_i} - d_{i,t} + B_{i,t} - B_{i,t-1}    (10)
Where orders placed at t-L arrive at t (lead time delay).
4. Optimization Method Selection Based on RPIW
ğŸ¯ Same RPIW from patient forecasts â†’ Inventory optimization method
5. Approach 1: Deterministic Inventory Optimization
Use when RPIW < 15% (Narrow Prediction Intervals)
5.1 Economic Order Quantity (EOQ) Model
Classic EOQ balances ordering costs against holding costs:
Q_i^* = âˆš(2 Ã— K_i Ã— D_i / h_i)    (EOQ)
Where D_i is the annual (or period) demand for item i.
5.2 Multi-Item Deterministic Formulation
Objective: Minimize total inventory cost
min Z = Î£_t Î£_i [K_i Ã— y_{i,t} + c_i Ã— Q_{i,t} + h_i Ã— I_{i,t} + p_i Ã— B_{i,t}]    (11)
Subject to:
C1: Inventory Balance
I_{i,t} = I_{i,t-1} + Q_{i,t-L_i} - dÌ‚_{i,t} + B_{i,t} - B_{i,t-1}    âˆ€i, âˆ€t    (12)
C2: Storage Capacity
Î£_i v_i Ã— I_{i,t} â‰¤ W    âˆ€t    (v_i = volume per unit)    (13)
C3: Order-Quantity Link
Q_{i,t} â‰¤ M Ã— y_{i,t}    âˆ€i, âˆ€t    (M = big number)    (14)
C4: Minimum Order Quantity
Q_{i,t} â‰¥ Q_i^{min} Ã— y_{i,t}    âˆ€i, âˆ€t    (15)
C5: Budget Constraint
Î£_i c_i Ã— Q_{i,t} â‰¤ Budget_t    âˆ€t    (16)
C6: Non-negativity
Q_{i,t} â‰¥ 0, I_{i,t} â‰¥ 0, B_{i,t} â‰¥ 0, y_{i,t} âˆˆ {0,1}    (17)
5.3 Reorder Point with Minimal Safety Stock
When RPIW < 15%, minimal safety stock is needed:
s_i = dÌ‚_i Ã— L_i + SS_i    (18)
SS_i = z_{CSL} Ã— Ïƒ_i Ã— âˆšL_i    (with small Ïƒ_i)    (19)
6. Approach 2: Stochastic Inventory Optimization
Use when RPIW > 40% (Wide Prediction Intervals)
6.1 Newsvendor Model (Single Period)
For perishable items or single-period decisions:
Q^* = F^{-1}(p / (p + h)) = F^{-1}(Critical Ratio)    (NV)
Where F is the CDF of demand, p = stockout cost, h = overage cost.
6.2 Stochastic (s, S) Policy
When inventory drops to s (reorder point), order up to S (order-up-to level):
s = Reorder point (trigger for ordering)
S = Order-up-to level (target inventory after order)
Order quantity Q = S - I when I â‰¤ s
6.3 Two-Stage Stochastic Formulation
Stage 1: Decide order quantities before demand is revealed
Stage 2: Observe demand realization, compute costs
Objective:
min Z = Î£_i [K_i Ã— y_i + c_i Ã— Q_i] + E_Ï‰[Î£_i (h_i Ã— I_i^Ï‰ + p_i Ã— B_i^Ï‰)]    (20)
Scenario-based formulation:
min Z = Î£_i [K_i Ã— y_i + c_i Ã— Q_i] + Î£_Ï‰ Ï€_Ï‰ Ã— Î£_i (h_i Ã— I_i^Ï‰ + p_i Ã— B_i^Ï‰)    (21)
Subject to (per scenario Ï‰):
I_i^Ï‰ = I_i^0 + Q_i - d_i^Ï‰ + B_i^Ï‰    âˆ€i, âˆ€Ï‰    (22)
I_i^Ï‰ â‰¥ 0, B_i^Ï‰ â‰¥ 0    âˆ€i, âˆ€Ï‰    (23)
6.4 Scenario Generation from Prediction Intervals
6.5 Safety Stock from Prediction Intervals
Derive safety stock directly from your ML prediction intervals:
Ïƒ_i = (d_i^U - d_i^L) / (2 Ã— z_{0.90}) = (Î±_i Ã— (U_t - L_t)) / 3.29    (24)
SS_i = z_{CSL} Ã— Ïƒ_i Ã— âˆšL_i    (25)
Example: For 99% CSL and L=3 days:
SS_i = 2.33 Ã— Ïƒ_i Ã— âˆš3 = 4.04 Ã— Ïƒ_i    (26)
7. Approach 3: Robust Inventory Optimization
Use when RPIW 15-40% (Medium Prediction Intervals)
7.1 Concept
Robust optimization protects against worst-case demand within an uncertainty set derived directly from your prediction intervals. No probability distribution needed.
7.2 Uncertainty Set from Prediction Intervals
Define demand uncertainty using your ML prediction intervals:
d_{i,t} âˆˆ [dÌ‚_{i,t} - Î”_{i,t}, dÌ‚_{i,t} + Î”_{i,t}]    (27)
Î”_{i,t} = d_{i,t}^U - dÌ‚_{i,t} = Î±_i Ã— (U_t - DÌ‚_t)    (28)
Budget of uncertainty (Bertsimas & Sim):
d_{i,t} = dÌ‚_{i,t} + Î´_{i,t} Ã— Î”_{i,t}, where |Î´_{i,t}| â‰¤ 1 and Î£_t |Î´_{i,t}| â‰¤ Î“_i    (29)
7.3 Robust Counterpart Formulation
Objective: Minimize cost under worst-case demand
min Z = Î£_i [K_i Ã— y_i + c_i Ã— Q_i + h_i Ã— I_i] + max_{d âˆˆ U} Î£_i p_i Ã— B_i(d)    (30)
The robust counterpart (using LP duality):
min Z = Î£_i [K_i Ã— y_i + c_i Ã— Q_i + h_i Ã— I_i + p_i Ã— (Î“_i Ã— Ï€_i + Î£_t Ï_{i,t})]    (31)
Subject to:
I_i â‰¥ dÌ‚_i Ã— L_i + Ï_i - Q_i - I_i^0    âˆ€i    (32)
Ï€_i + Ï_{i,t} â‰¥ Î”_{i,t}    âˆ€i, âˆ€t    (33)
Ï€_i â‰¥ 0, Ï_{i,t} â‰¥ 0    âˆ€i, âˆ€t    (34)
7.4 Robust Safety Stock
Safety stock derived directly from prediction interval bounds:
SS_i^{robust} = Î”_i Ã— âˆš(L_i Ã— Î“_i)    (35)
Where Î“_i controls conservatism (from RPIW):
8. Approach Comparison
8.1 Comprehensive Comparison
8.2 Summary Decision Rule
9. Python Implementation Stack
9.1 Recommended Libraries
9.2 Integration with HealthForecast AI
â€” End of Document â€”

--- TABLE ---
From Demand Forecasting to Optimal Inventory
Prediction Intervals â†’ Safety Stock â†’ Order Quantities â†’ Total Cost Minimization
Deterministic EOQ  â€¢  Stochastic (s,S)  â€¢  Robust Min-Max

--- TABLE ---
Healthcare Inventory Types: Gloves (i=1)  â€¢  PPE (i=2)  â€¢  Medications (i=3)

--- TABLE ---
Item (i) | Unit Cost | Demand Driver | Criticality
i=1: Gloves | R 2.50/pair | ~5 per patient | High volume, low unit cost
i=2: PPE | R 45/set | ~0.3 per patient | Critical during outbreaks
i=3: Medications | R 85/unit | Condition-specific | Life-critical, expiration dates

--- TABLE ---
ğŸ”— Key Insight
Your ML model's prediction intervals for patient arrivals translate directly to prediction intervals for inventory demand. Narrow patient forecast intervals â†’ Narrow inventory demand intervals â†’ Simpler inventory optimization.

--- TABLE ---
Use the SAME RPIW from your patient forecasts to select the inventory optimization method!

--- TABLE ---
Variable | Type | Description
Q_{i,t} | Integer â‰¥ 0 | Order quantity for item i at time t
I_{i,t} | Continuous | Inventory level for item i at end of period t
s_i | Continuous â‰¥ 0 | Reorder point (when to order) for item i
S_i | Continuous â‰¥ 0 | Order-up-to level for item i
SS_i | Continuous â‰¥ 0 | Safety stock for item i
y_{i,t} | Binary {0,1} | Order indicator (1 if order placed at t)
B_{i,t} | Continuous â‰¥ 0 | Backorder/stockout quantity for item i at t

--- TABLE ---
Parameter | Description
dÌ‚_{i,t} | Forecasted demand for item i on day t (from ML Ã— usage rate)
c_i | Unit purchase cost for item i
h_i | Holding cost per unit per period (typically 0.05% of c_i per day)
K_i | Fixed ordering cost per order for item i
p_i | Stockout penalty cost per unit (much higher than h_i in healthcare)
L_i | Lead time for item i (days from order to delivery)
W | Warehouse storage capacity
CSL_i | Cycle service level target (e.g., 95%, 99%)

--- TABLE ---
RPIW | Uncertainty | Method | Safety Stock
< 15% | ğŸŸ¢ LOW | Deterministic EOQ | Minimal (~1 day)
15-40% | ğŸŸ¡ MEDIUM | Robust (s,S) | From interval width
> 40% | ğŸ”´ HIGH | Stochastic (s,S) | From distribution

--- TABLE ---
ğŸ’¡ When to Use
Deterministic EOQ/MILP is appropriate when demand forecasts are highly accurate (RPIW < 15%). Safety stock can be minimal because demand rarely deviates significantly from the forecast.

--- TABLE ---
Scenario | Demand | Probability | Source
Ï‰ = 1 (Low) | d_i^1 = Î±_i Ã— L_t | Ï€_1 = 0.10 | 10th percentile
Ï‰ = 2 (Medium) | d_i^2 = Î±_i Ã— DÌ‚_t | Ï€_2 = 0.60 | 50th percentile
Ï‰ = 3 (High) | d_i^3 = Î±_i Ã— U_t | Ï€_3 = 0.30 | 90th percentile

--- TABLE ---
ğŸ’¡ When to Use
Stochastic inventory optimization is needed when RPIW > 40%. Wide prediction intervals mean significant chance of demand being far from forecast, requiring explicit scenario modeling and higher safety stock.

--- TABLE ---
RPIW | Î“_i | Protection | Safety Stock
15-20% | Î“ = 1 | 1 day worst-case | Low
20-30% | Î“ = âˆšL â‰ˆ 1.7 | Balanced | Moderate
30-40% | Î“ = L = 3 | All days protected | High

--- TABLE ---
ğŸ’¡ When to Use
Robust inventory optimization is ideal for RPIW 15-40%. It uses prediction interval bounds directly (Î”_i) without requiring probability distributions. Same computational complexity as deterministic, with built-in protection.

--- TABLE ---
Criterion | Deterministic | Robust | Stochastic
RPIW Threshold | < 15% | 15-40% | > 40%
Policy Type | EOQ / Fixed | Robust (s, S) | Stochastic (s, S)
Safety Stock | Minimal | From Î” Ã— âˆš(LÃ—Î“) | From distribution
Holding Cost | ğŸŸ¢ Low | ğŸŸ¡ Medium | ğŸ”´ Higher
Stockout Risk | ğŸ”´ Higher | ğŸŸ¡ Controlled | ğŸŸ¢ Low
Computation | âš¡ Fast | âš¡ Fast | ğŸ¢ Slow
Best For | Stable demand | Moderate variability | Critical items, high var

--- TABLE ---
ğŸ¯ INVENTORY OPTIMIZATION METHOD SELECTION
Same RPIW from Patient Forecasts â†’ Inventory Decision
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
RPIW < 15%  â†’  Deterministic EOQ/MILP
15% â‰¤ RPIW â‰¤ 40%  â†’  Robust (s, S) Policy
RPIW > 40%  â†’  Stochastic (s, S) Policy

--- TABLE ---
Library | Purpose | Use Case
PuLP | Linear/Integer Programming | Deterministic, Robust MILP
Pyomo | Algebraic Modeling | Stochastic (PySP extension)
SciPy | EOQ, Newsvendor | Analytical solutions
SimPy | Discrete Event Simulation | Policy validation

--- TABLE ---
ML FORECAST â†’ PREDICTION INTERVALS â†’ INVENTORY OPTIMIZATION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
1. Patient Arrival Forecast (XGBoost/LSTM/Hybrid) â†’ DÌ‚_t, [L_t, U_t]
â†“
2. Convert to Inventory Demand: dÌ‚_i = Î±_i Ã— DÌ‚_t
â†“
3. Compute RPIW â†’ Select Optimization Method
â†“
4. Solve â†’ Optimal (s, S) or Order Quantities
â†“
5. Display in Streamlit Dashboard with Reorder Alerts
